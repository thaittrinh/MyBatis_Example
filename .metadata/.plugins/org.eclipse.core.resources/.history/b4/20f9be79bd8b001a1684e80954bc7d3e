package thai.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

import thai.entity.User;
import thai.service.UserService;

@Controller
public class LoginController {

	@Autowired
	UserService userService;
	
	 @GetMapping("/login")
	  public ModelAndView formLogin() {
		 
		 ModelAndView mav = new ModelAndView("login/login");
		 mav.addObject("User", new User());
		 return mav;
	 }
	 
	 @PostMapping("/login")
	 public ModelAndView checkLogin(@ModelAttribute("User") User user) {
		 ModelAndView mav = new ModelAndView(); 
		 boolean bl = userService.checkLogin(user);
		 
		 if (bl) {
			 mav.setViewName("student/students");
		}
		 
		 
		 
		 mav.addObject("User", new User());
		 return mav;
	 }

	 
	 @RequestMapping("/register")
	  public String register() {
		 
	    return "login/register";
	  }
}
